# Groove AI Bot (Audited v2)

Телеграм-бот-радио: поиск треков, воспроизведение, голосование за жанр каждый час, красивое меню и статус.

## Команды
- `/start` — приветствие и статус-панель
- `/menu` `/status` — показать/обновить панель
- `/play <запрос>` или `/p <запрос>` — поиск до 10 треков + выбор по кнопке
- `/ron` `/roff` — включить/выключить радио
- `/next` `/skip` — пропустить текущий трек
- `/source <youtube|ytmusic|soundcloud|jamendo|archive>` — переключить источник
- `/vote` — вручную запустить голосование (в дополнение к ежечасному)

## Особенности
- Радио-логика: учитывает длительность трека, чтобы не «перебивать» в середине
- Голосование: каждые 60 минут стартует автоматически (окно по умолчанию 3 минуты)
- FFmpeg/ffprobe: лог версий на `/start`, fallback на M4A, если MP3 не удался
- Логи: поиск, скачивание, отправка, ошибки — всё помечено

## Переменные окружения
- `BOT_TOKEN` — **обязательно**
- `ADMINS` — `123,456` (опционально)
- `DOWNLOADS_DIR` — `downloads` по умолчанию
- `YOUTUBE_COOKIES` — путь к cookies.txt (опционально)
- `PROXY_ENABLED` = `1` и `PROXY_URL` — если нужен прокси
- `FFMPEG_LOCATION` — путь к ffmpeg/ffprobe (опционально)
- `VOTE_WINDOW_SEC` — окно голосования, по умолчанию 180
- `SONG_COOLDOWN_SEC` — пауза между радио-треками, по умолчанию 240
- `LOG_LEVEL` — уровень логов (INFO/DEBUG/...)

## Сборка и запуск
```bash
docker build -t groove-ai-bot .
docker run --rm -e BOT_TOKEN=123:ABC groove-ai-bot
```

## Railway
- Команда запуска: `python main.py`
- В `requirements.txt` уже указан `python-telegram-bot[job-queue]` — фоновые задачи будут работать.
