# Groove AI Bot

Телеграм-бот для радио: поиск треков, отправка в чат, радио-режим и почасовое голосование за жанр.

## Возможности
- `/play <запрос>` — показывает до 10 результатов (название + длительность), выбор через кнопки.
- Радио-режим: каждые ~несколько минут играет треки выбранного жанра.
- Почасовое голосование за жанр (окно голосования по умолчанию 3 мин).
- Переключение источника: `/source youtube|ytmusic|soundcloud|jamendo|archive` или кнопкой.
- Красивое статус-сообщение с прогресс-баром.
- Команды админа: `/ron` `/roff` `/next` `/skip` `/source`

## Переменные окружения
- `BOT_TOKEN` — токен Telegram-бота (**обязательно**).
- `ADMINS` — список ID админов через запятую (если пусто, все считаются админами в приватных тестах).
- `DOWNLOADS_DIR` — директория для загрузок (по умолчанию `downloads`).
- `YOUTUBE_COOKIES` — путь к cookies.txt (опционально, для YouTube).
- `PROXY_ENABLED` (`0/1`) и `PROXY_URL` — для прокси (опционально).
- `FFMPEG_LOCATION` — путь к бинарникам ffmpeg/ffprobe (опционально).
- `VOTE_WINDOW_SEC` — длина голосования в секундах (по умолчанию 180).
- `SONG_COOLDOWN_SEC` — пауза между треками радио (по умолчанию 240).

## Сборка Docker
```bash
docker build -t groove-ai-bot .
docker run --rm -e BOT_TOKEN=123:ABC -p 8080:8080 groove-ai-bot
```

## Railway
- Укажите команду запуска: `python main.py`
- Переменные окружения: см. раздел выше.
- Контейнер на основе `python:3.11-slim` автоматически содержит `ffmpeg` и свежий `yt-dlp`.

## Примечания
- При ошибках FFmpeg конвертация на MP3 переключается на M4A автоматически.
- Логируются версии `ffmpeg`/`ffprobe` при `/start`.
- Если звук не уходит из-за ffprobe-ошибки, проверьте доступность `ffmpeg` в контейнере и права на `downloads/`.
